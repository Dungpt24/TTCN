{"ast":null,"code":"var _jsxFileName = \"/media/turborvip/_add_disk0114/project/learn/laravel-web-new/fe/web_news_php/src/component/LoginForm/LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport clsx from \"clsx\";\nimport axios from \"axios\";\nimport FormInputText from \"../FormInputText/FormInputText\";\nimport styles from './LoginForm.module.css';\nimport Toast from \"../Toast/Toast\";\nimport { useStore, actions } from '../../store';\nimport { memo, useState } from \"react\";\nimport OTPForm from \"../OTPForm/OTPForm\"; // router\n\nimport { Link, useNavigate } from \"react-router-dom\"; // Toast\n\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport notify from \"../../common/notify\"; //Spinner Loader\n\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { css } from \"@emotion/react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  border-color: 1ECFA9;\n`;\n\nfunction LoginForm() {\n  _s();\n\n  const [state, dispatch] = useStore();\n  const [otpStatus, setOTPStatus] = useState(false);\n  let [loading, setLoading] = useState(false);\n  let navigate = useNavigate();\n\n  const handleSubmit = () => {\n    setLoading(true);\n    axios({\n      method: 'post',\n      url: 'http://localhost:1337/login',\n      data: {\n        username: state.username,\n        password: state.password\n      }\n    }).then(async res => {\n      // console.log(res.data, res.otp, res.res);\n      if (res.data.otp === 'pendding' && res.data.status === 202) {\n        setOTPStatus(res.data.otp);\n        await dispatch(actions.setIdUser(res.data.idUser));\n        setLoading(false);\n      } else if (res.data.username === false && res.data.status === 404) {\n        notify('error', 'Username was wrong!');\n        setLoading(false);\n      } else if (res.data.password === false && res.data.status === 404) {\n        notify('error', 'Password was wrong!');\n        setLoading(false);\n      } else if (res.data.otp === \"success\" && res.data.res) {\n        // lưu vào local storage\n        // console.log('success');\n        localStorage.setItem('accessToken', res.data.accessToken);\n        localStorage.setItem('user', JSON.stringify(res.data.user));\n        await dispatch(actions.setAuthUser(true));\n        navigate(`../`);\n      }\n    }).catch(error => console.log(error));\n  };\n\n  const setInputUsername = e => {\n    dispatch(actions.setUsernameLogin(e.target.value));\n  };\n\n  const setInputPassword = e => {\n    dispatch(actions.setPasswordLogin(e.target.value));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"formLogin\",\n    className: styles.loginForm,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.caption,\n      children: \"Sign in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormInputText, {\n      width: \"380px\",\n      label: \"Username\",\n      msg: \"You can use letters, numbers and periods.\",\n      require: true,\n      event: setInputUsername\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormInputText, {\n      type: \"password\",\n      width: \"380px\",\n      label: \"Password\",\n      require: true,\n      event: setInputPassword\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.formBtn,\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: '/forgotpass',\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: clsx(styles.btnForgot, styles.btn),\n          children: \"Forgot?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: clsx(styles.btnSignUp, styles.btn),\n        onClick: handleSubmit,\n        onLoad: () => setLoading(!loading),\n        children: loading ? /*#__PURE__*/_jsxDEV(ClipLoader, {\n          color: \"#1ECFA9\",\n          css: override,\n          loading: loading,\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 35\n        }, this) : 'Submit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), otpStatus && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Toast, {\n        type: \"warning\",\n        msg: \"You logged another device!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(OTPForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoginForm, \"mQtItBmKh4Zk1S5ApawXgATM8Yk=\", false, function () {\n  return [useStore, useNavigate];\n});\n\n_c = LoginForm;\nexport default _c2 = /*#__PURE__*/memo(LoginForm);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LoginForm\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["clsx","axios","FormInputText","styles","Toast","useStore","actions","memo","useState","OTPForm","Link","useNavigate","ToastContainer","notify","ClipLoader","css","override","LoginForm","state","dispatch","otpStatus","setOTPStatus","loading","setLoading","navigate","handleSubmit","method","url","data","username","password","then","res","otp","status","setIdUser","idUser","localStorage","setItem","accessToken","JSON","stringify","user","setAuthUser","catch","error","console","log","setInputUsername","e","setUsernameLogin","target","value","setInputPassword","setPasswordLogin","loginForm","caption","formBtn","btnForgot","btn","btnSignUp"],"sources":["/media/turborvip/_add_disk0114/project/learn/laravel-web-new/fe/web_news_php/src/component/LoginForm/LoginForm.js"],"sourcesContent":["import clsx from \"clsx\"\nimport axios from \"axios\"\nimport FormInputText from \"../FormInputText/FormInputText\"\nimport styles from './LoginForm.module.css'\nimport Toast from \"../Toast/Toast\"\nimport { useStore, actions } from '../../store'\nimport { memo, useState } from \"react\"\nimport OTPForm from \"../OTPForm/OTPForm\"\n// router\nimport { Link, useNavigate } from \"react-router-dom\";\n// Toast\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport notify from \"../../common/notify\"\n//Spinner Loader\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { css } from \"@emotion/react\";\n\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  border-color: 1ECFA9;\n`;\n\nfunction LoginForm() {\n    const [state, dispatch] = useStore();\n    const [otpStatus, setOTPStatus] = useState(false);\n    let [loading, setLoading] = useState(false);\n\n    let navigate = useNavigate();\n\n    const handleSubmit = () => {\n        setLoading(true);\n        axios({\n            method: 'post',\n            url: 'http://localhost:1337/login',\n            data: {\n                username: state.username,\n                password: state.password\n            }\n        })\n            .then(async (res) => {\n                // console.log(res.data, res.otp, res.res);\n                if (res.data.otp === 'pendding' && res.data.status === 202) {\n                    setOTPStatus(res.data.otp);\n                    await dispatch(actions.setIdUser(res.data.idUser));\n                    setLoading(false);\n                } else if (res.data.username === false && res.data.status === 404) {\n                    notify('error', 'Username was wrong!');\n                    setLoading(false);\n                } else if (res.data.password === false && res.data.status === 404) {\n                    notify('error', 'Password was wrong!');\n                    setLoading(false);\n                } else if (res.data.otp === \"success\" && res.data.res) {\n                    // lưu vào local storage\n                    // console.log('success');\n                    localStorage.setItem('accessToken', res.data.accessToken);\n                    localStorage.setItem('user', JSON.stringify(res.data.user));\n                    await dispatch(actions.setAuthUser(true));\n                    navigate(`../`);\n                }\n            })\n            .catch(error => console.log(error));\n\n    }\n    const setInputUsername = (e) => { dispatch(actions.setUsernameLogin(e.target.value)) };\n    const setInputPassword = (e) => { dispatch(actions.setPasswordLogin(e.target.value)) };\n\n    return (\n        <div id=\"formLogin\" className={styles.loginForm}>\n            <div className={styles.caption}>Sign in</div>\n            <FormInputText\n                width='380px'\n                label='Username'\n                msg='You can use letters, numbers and periods.'\n                require\n                event={setInputUsername}\n            />\n            <FormInputText\n                type='password'\n                width='380px'\n                label='Password'\n                require\n                event={setInputPassword}\n            />\n            <div className={styles.formBtn}>\n                <Link to={'/forgotpass'}>\n                    <button className={clsx(styles.btnForgot, styles.btn)}>Forgot?</button>\n                </Link>\n                <button\n                    className={clsx(styles.btnSignUp, styles.btn)}\n                    onClick={handleSubmit}\n                    onLoad={() => setLoading(!loading)}\n                >\n                    {\n                        loading ? <ClipLoader color={\"#1ECFA9\"} css={override} loading={loading} size={20} /> : 'Submit'\n                    }\n                </button>\n            </div>\n            {otpStatus && (\n                <>\n                    <Toast type='warning' msg='You logged another device!' />\n                    <OTPForm />\n                </>\n            )\n            }\n            <ToastContainer />\n        </div >\n    )\n}\n\nexport default memo(LoginForm)\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}